<ion-content [fullscreen]="true" class="ion-padding">
  <div class="container">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large">Inscription</ion-title>
      </ion-toolbar>
    </ion-header>

    <div class="form-container">
      <h2>Créer un compte</h2>
      
      <form #data="ngForm" (ngSubmit)="register(data)">
        
        <!-- Message d'erreur -->
        <div *ngIf="error" class="error-message">
          <ion-text color="danger">
            {{ error }}
          </ion-text>
        </div>

        <!-- Nom d'utilisateur -->
        <ion-item>
          <ion-label position="stacked">Nom d'utilisateur *</ion-label>
          <ion-input 
            id = "username"
            type="text" 
            name="username" 
            ngModel 
            required 
            minlength="3"
            #username="ngModel">
          </ion-input>
        </ion-item>
        <div *ngIf="username.invalid && (username.dirty || username.touched)" class="error-message">
          <ion-text color="danger" *ngIf="username.errors?.['required']">
            Le nom d'utilisateur est requis
          </ion-text>
          <ion-text color="danger" *ngIf="username.errors?.['minlength']">
            Le nom d'utilisateur doit contenir au moins 3 caractères
          </ion-text>
        </div>

        <!-- Mot de passe -->
        <ion-item>
          <ion-label position="stacked">Mot de passe *</ion-label>
          <ion-input 
            id = "password"
            type="password" 
            name="password" 
            ngModel 
            required 
            minlength="6"
            #password="ngModel">
          </ion-input>
        </ion-item>
        <div *ngIf="password.invalid && (password.dirty || password.touched)" class="error-message">
          <ion-text color="danger" *ngIf="password.errors?.['required']">
            Le mot de passe est requis
          </ion-text>
          <ion-text color="danger" *ngIf="password.errors?.['minlength']">
            Le mot de passe doit contenir au moins 6 caractères
          </ion-text>
        </div>

        <!-- Confirmation mot de passe -->
        <ion-item>
          <ion-label position="stacked">Confirmer le mot de passe *</ion-label>
          <ion-input 
            id = "confirmPassword"
            type="password" 
            name="confirmPassword" 
            ngModel 
            required
            #confirmPassword="ngModel">
          </ion-input>
        </ion-item>
        <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="error-message">
          <ion-text color="danger" *ngIf="confirmPassword.errors?.['required']">
            La confirmation du mot de passe est requise
          </ion-text>
        </div>

        <!-- Bouton d'inscription -->
        <ion-button 
          type="submit" 
          expand="block" 
          [disabled]="!data.valid"
          class="submit-button">
          S'inscrire
        </ion-button>

      </form>

      <!-- Lien vers la page de connexion -->
      <div class="login-link">
        <p>Déjà un compte ? 
          <a (click)="goToLogin()" class="link">Se connecter</a>
        </p>
      </div>
    </div>
  </div>
</ion-content>